# ğŸ“ æ–‡ä»¶è·¯å¾„ä¿®å¤æ€»ç»“

## ğŸ¯ ä¿®å¤ç›®æ ‡

å°† `file_cache.pkl` å’Œ `scanned_files_*.xlsx` æ–‡ä»¶çš„ç”Ÿæˆè·¯å¾„ä»é¡¹ç›®æ ¹ç›®å½•ä¿®æ”¹ä¸º `data` æ–‡ä»¶å¤¹ï¼Œä½¿é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°ã€‚

## ğŸ”§ ä¿®å¤å†…å®¹

### 1. ç¼“å­˜ç®¡ç†å™¨ä¿®å¤ (`src/cache_manager.py`)

**ä¿®æ”¹å‰**:
```python
def __init__(self, cache_file="file_cache.pkl"):
    self.cache_file = cache_file
```

**ä¿®æ”¹å**:
```python
def __init__(self, cache_file="file_cache.pkl"):
    # ç¡®ä¿ç¼“å­˜æ–‡ä»¶ä¿å­˜åœ¨dataç›®å½•ä¸­
    data_dir = Path("data")
    data_dir.mkdir(exist_ok=True)
    self.cache_file = data_dir / cache_file
```

**ä¿®å¤æ•ˆæœ**:
- âœ… ç¼“å­˜æ–‡ä»¶ç°åœ¨ä¿å­˜åœ¨ `data/file_cache.pkl`
- âœ… è‡ªåŠ¨åˆ›å»º `data` ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
- âœ… ä½¿ç”¨ `pathlib.Path` è¿›è¡Œè·¯å¾„ç®¡ç†

### 2. æ–‡ä»¶æ‰«æå™¨ä¿®å¤ (`src/file_scanner.py`)

**ä¿®æ”¹å‰**:
```python
def export_to_excel(self, filename="scanned_files.xlsx"):
    # ... å¤„ç†æ•°æ® ...
    df.to_excel(filename, index=False, engine='openpyxl')
    print(f"æ–‡ä»¶ä¿¡æ¯å·²å¯¼å‡ºåˆ°: {filename}")
```

**ä¿®æ”¹å**:
```python
def export_to_excel(self, filename="scanned_files.xlsx"):
    # ... å¤„ç†æ•°æ® ...
    # ç¡®ä¿Excelæ–‡ä»¶ä¿å­˜åœ¨dataç›®å½•ä¸­
    data_dir = Path("data")
    data_dir.mkdir(exist_ok=True)
    excel_path = data_dir / filename
    
    df.to_excel(excel_path, index=False, engine='openpyxl')
    print(f"æ–‡ä»¶ä¿¡æ¯å·²å¯¼å‡ºåˆ°: {excel_path}")
```

**ä¿®å¤æ•ˆæœ**:
- âœ… Excelæ–‡ä»¶ç°åœ¨ä¿å­˜åœ¨ `data/` ç›®å½•ä¸­
- âœ… è‡ªåŠ¨åˆ›å»º `data` ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
- âœ… è·¯å¾„ä¿¡æ¯æ›´åŠ å‡†ç¡®

### 3. ä¸»ç¨‹åºä¿®å¤ (`src/main.py`)

**ä¿®æ”¹å‰**:
```python
filename = f"scanned_files_{datetime.now().year}.xlsx"
df = pd.DataFrame(all_files)
df.to_excel(filename, index=False, engine='openpyxl')
```

**ä¿®æ”¹å**:
```python
filename = f"scanned_files_{datetime.now().year}.xlsx"
# ç¡®ä¿Excelæ–‡ä»¶ä¿å­˜åœ¨dataç›®å½•ä¸­
data_dir = Path("data")
data_dir.mkdir(exist_ok=True)
excel_path = data_dir / filename

df = pd.DataFrame(all_files)
df.to_excel(excel_path, index=False, engine='openpyxl')
```

**ä¿®å¤æ•ˆæœ**:
- âœ… ä¸»ç¨‹åºä¸­çš„Excelå¯¼å‡ºä¹Ÿä¿å­˜åˆ° `data` ç›®å½•
- âœ… ä¿æŒä¸æ–‡ä»¶æ‰«æå™¨çš„ä¸€è‡´æ€§

## ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”

| æ–‡ä»¶ç±»å‹ | ä¿®å¤å‰è·¯å¾„ | ä¿®å¤åè·¯å¾„ | çŠ¶æ€ |
|---------|-----------|-----------|------|
| ç¼“å­˜æ–‡ä»¶ | `file_cache.pkl` | `data/file_cache.pkl` | âœ… å·²ä¿®å¤ |
| Excelæ–‡ä»¶ | `scanned_files_*.xlsx` | `data/scanned_files_*.xlsx` | âœ… å·²ä¿®å¤ |
| å…¶ä»–æ•°æ® | æ ¹ç›®å½• | `data/` ç›®å½• | âœ… å·²ä¿®å¤ |

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•è„šæœ¬
- âœ… `tests/test_file_paths.py` - ä¸“é—¨æµ‹è¯•æ–‡ä»¶è·¯å¾„ä¿®æ”¹

### æµ‹è¯•ç»“æœ
- âœ… ç¼“å­˜æ–‡ä»¶è·¯å¾„æµ‹è¯•é€šè¿‡
- âœ… Excelå¯¼å‡ºè·¯å¾„æµ‹è¯•é€šè¿‡  
- âœ… dataç›®å½•ç»“æ„æµ‹è¯•é€šè¿‡
- âœ… **æ‰€æœ‰æµ‹è¯•é€šè¿‡ç‡: 3/3 (100%)**

## ğŸ¯ ä¿®å¤ä¼˜åŠ¿

### 1. é¡¹ç›®ç»“æ„æ›´æ¸…æ™°
- ğŸ“ `src/` - æºä»£ç 
- ğŸ“ `docs/` - æ–‡æ¡£
- ğŸ“ `data/` - æ‰€æœ‰æ•°æ®æ–‡ä»¶
- ğŸ“ `tests/` - æµ‹è¯•æ–‡ä»¶
- ğŸ“ `scripts/` - è„šæœ¬æ–‡ä»¶

### 2. æ•°æ®ç®¡ç†æ›´è§„èŒƒ
- æ‰€æœ‰è¿è¡Œæ—¶ç”Ÿæˆçš„æ•°æ®é›†ä¸­åœ¨ `data` ç›®å½•
- ä¾¿äºæ•°æ®å¤‡ä»½å’Œç®¡ç†
- é¿å…æ ¹ç›®å½•æ–‡ä»¶æ··ä¹±

### 3. è·¯å¾„ç®¡ç†æ›´å®‰å…¨
- ä½¿ç”¨ `pathlib.Path` è¿›è¡Œè·¯å¾„æ“ä½œ
- è‡ªåŠ¨åˆ›å»ºå¿…è¦çš„ç›®å½•
- è·¨å¹³å°å…¼å®¹æ€§æ›´å¥½

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. ç°æœ‰æ–‡ä»¶å¤„ç†
- å·²å­˜åœ¨çš„ `file_cache.pkl` å’ŒExcelæ–‡ä»¶å·²ç§»åŠ¨åˆ° `data` ç›®å½•
- ç¨‹åºä¼šè‡ªåŠ¨ä»æ–°è·¯å¾„åŠ è½½ç¼“å­˜

### 2. è·¯å¾„ä¾èµ–
- æ‰€æœ‰ç›¸å…³ä»£ç éƒ½å·²æ›´æ–°ä¸ºä½¿ç”¨ `data` ç›®å½•
- é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„ä¿æŒä¸å˜

### 3. å‘åå…¼å®¹
- å¦‚æœ `data` ç›®å½•ä¸å­˜åœ¨ï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆ›å»º
- ä¸ä¼šå½±å“ç°æœ‰åŠŸèƒ½

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è¿è¡Œç¨‹åº
```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
python src/main.py

# æˆ–ä½¿ç”¨è„šæœ¬
scripts/run.bat
```

### æŸ¥çœ‹æ•°æ®æ–‡ä»¶
```bash
# æŸ¥çœ‹dataç›®å½•ä¸­çš„æ–‡ä»¶
ls data/

# æŸ¥çœ‹ç¼“å­˜æ–‡ä»¶
ls data/file_cache.pkl

# æŸ¥çœ‹å¯¼å‡ºçš„Excelæ–‡ä»¶
ls data/scanned_files_*.xlsx
```

## ğŸ”® æœªæ¥æ‰©å±•

### 1. æ•°æ®åˆ†ç±»
- å¯ä»¥è¿›ä¸€æ­¥ç»†åˆ† `data` ç›®å½•
- ä¾‹å¦‚ï¼š`data/cache/`ã€`data/exports/`ã€`data/uploads/`

### 2. æ•°æ®æ¸…ç†
- å®šæœŸæ¸…ç†è¿‡æœŸçš„ç¼“å­˜æ–‡ä»¶
- å‹ç¼©å†å²Excelæ–‡ä»¶

### 3. æ•°æ®å¤‡ä»½
- è‡ªåŠ¨å¤‡ä»½é‡è¦çš„æ•°æ®æ–‡ä»¶
- ç‰ˆæœ¬æ§åˆ¶æ”¯æŒ

---

**æ€»ç»“**: æ–‡ä»¶è·¯å¾„ä¿®å¤å®Œæˆï¼ç°åœ¨æ‰€æœ‰ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶éƒ½ä¿å­˜åœ¨ `data` ç›®å½•ä¸­ï¼Œé¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†ã€‚ğŸ‰
